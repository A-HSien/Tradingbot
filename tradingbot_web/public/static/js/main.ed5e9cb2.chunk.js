(this.webpackJsonptradingbot_fe=this.webpackJsonptradingbot_fe||[]).push([[0],{68:function(e,t,c){},69:function(e,t,c){"use strict";c.r(t);var a,n=c(1),s=c.n(n),r=c(19),l=c.n(r),o=c(12),i=c(35).a,b=i,j=b("bg-gray-100","dark:bg-gray-700"),u=b("text-gray-900","dark:text-gray-100"),d=b("py-3","px-6"),h=b("rounded","border"),O=b(h,"border-gray-100","dark:border-gray-600"),x=b(h,"border-blue-500","bg-gray-100","dark:bg-gray-700","py-2","px-4","font-semibold","text-blue-500"),m=b("block","w-full","text-center","py-2","px-4","hover:bg-blue-500","font-semibold","text-blue-500","hover:text-white",h,"border-blue-500","hover:border-transparent"),p=b("table-auto","rounded","border-collapse","border","border-gray-800","w-full"),f=b("py-3","px-2","border","border-gray-600","h-10","text-center"),g=b("overflow-auto","rounded","bg-gray-600","p-2","mb-3","text-left"),v=(b("overflow-auto"),{background:j,textColor:u,pageEdge:d,border:h,borderGray:O,selectStyle:x,buttonStyle:m,table:p,tableCell:f,codeBlockStyle:g}),N=c(7),y=c(3),C=c(20),S=c(4),k=c(14),w=c.n(k),A=c(18),E=c(21),L=c(6),z=c.n(L),T=c(2),F=new function e(){var t=this;Object(E.a)(this,e),this.accounts=[],this.loadAccounts=Object(A.a)(w.a.mark((function e(){var c;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.a.get("/account/all").then((function(e){return e.data}));case 2:c=e.sent,t.accounts=c;case 4:case"end":return e.stop()}}),e)}))),this.save=function(){var e=Object(A.a)(w.a.mark((function e(t){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.a.post("/account/save",t).then((function(e){return e.data}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Object(T.l)(this)},q=c(0),B="New",K={root:b(v.pageEdge,"grid","grid-cols-2","gap-2"),input:b(v.background,v.borderGray,"px-3"),checkbox:b("translate-y-1.5","transform-gpu"),error:b("col-span-2","pt-2","text-red-500","text-xs"),button:b(v.buttonStyle,"col-span-2")},M={id:"",name:"",apiKey:"",apiSecret:"",quota:0,disabled:!1},P=function(){var e=Object(y.h)().id,t=Object(n.useState)(Object(o.a)({},M)),c=Object(S.a)(t,2),a=c[0],s=c[1],r=Object(n.useState)(!1),l=Object(S.a)(r,2),i=l[0],b=l[1],j=Object(n.useState)(""),u=Object(S.a)(j,2),d=u[0],h=u[1],O=Object(n.useState)(!1),x=Object(S.a)(O,2),m=x[0],p=x[1];Object(n.useEffect)((function(){var t=e===B?M:F.accounts.find((function(t){return t.id===e}));t?s(Object(o.a)({},t)):b(!0)}),[e]);var f=function(e){var t=e.currentTarget,c="checkbox"===t.type?t.checked:t.value,n=t.name;s(Object(o.a)(Object(o.a)({},a),{},Object(C.a)({},n,c)))};return i?Object(q.jsx)(y.a,{push:!0,to:se(ne.Accounts)}):Object(q.jsxs)("div",{className:K.root,children:[Object(q.jsx)("label",{children:"\u540d\u7a31"}),Object(q.jsx)("input",{className:K.input,name:"name",type:"text",value:a.name,onChange:f}),e===B&&Object(q.jsxs)(q.Fragment,{children:[Object(q.jsx)("label",{children:"API key"}),Object(q.jsx)("input",{className:K.input,name:"apiKey",type:"text",value:a.apiKey,onChange:f}),Object(q.jsx)("label",{children:"API Secret"}),Object(q.jsx)("input",{className:K.input,name:"apiSecret",type:"text",value:a.apiSecret,onChange:f})]}),Object(q.jsx)("label",{children:"\u55ae\u7b46\u6295\u8cc7\u984d"}),Object(q.jsx)("input",{className:K.input,name:"quota",type:"number",value:a.quota,onChange:f}),Object(q.jsx)("label",{children:"\u505c\u7528"}),Object(q.jsx)("input",{className:K.checkbox,name:"disabled",type:"checkbox",checked:a.disabled,onChange:f}),Object(q.jsx)("pre",{className:K.error,children:d||a.error}),Object(q.jsx)("button",{className:K.button,onClick:function(){var t=[];a.name||t.push("\u8acb\u8f38\u5165 \u540d\u7a31"),e===B&&(a.apiKey||t.push("\u8acb\u8f38\u5165 api Key"),a.apiSecret||t.push("\u8acb\u8f38\u5165 api Secret"),s(Object(o.a)(Object(o.a)({},a),{},{error:t.join("\n")}))),t.length>0||(p(!0),F.save(a).then((function(e){e?(h(e),p(!1)):b(!0)})).catch((function(){h("\u5132\u5b58\u5931\u6557, \u8acb\u6aa2\u67e5\u60a8\u7684 api Key \u6216 api Secret"),p(!1)})))},disabled:m,children:"\u5132\u5b58"})]})},R=c(8),I=function(e){return JSON.stringify(e,null,"\t")},D={page:b(v.pageEdge),tableContainer:b("overflow-auto"),table:v.table,tableCell:v.tableCell},J=Object(R.b)((function(){var e=Object(y.h)().name,t=Object(n.useState)([]),c=Object(S.a)(t,2),a=c[0],s=c[1];return Object(n.useEffect)((function(){z.a.get("/account/records",{params:{name:e}}).then((function(e){return e.data})).then(s)}),[e]),Object(q.jsxs)("div",{className:D.page,children:["\u5e33\u6236 - ",e,Object(q.jsx)("br",{}),"\u7cfb\u7d71\u50c5\u4fdd\u5b58\u4e03\u5929\u5167\u4e4b\u4ea4\u6613\u7d00\u9304:",Object(q.jsx)("div",{className:D.tableContainer,children:Object(q.jsxs)("table",{className:D.table,children:[Object(q.jsx)("thead",{children:Object(q.jsxs)("tr",{children:[Object(q.jsx)("th",{className:D.tableCell,children:"\u6642\u9593"}),Object(q.jsx)("th",{className:D.tableCell,children:"\u52d5\u4f5c"}),Object(q.jsx)("th",{className:D.tableCell,children:"\u6210\u529f"}),Object(q.jsx)("th",{className:D.tableCell,children:"\u53c3\u6578"}),Object(q.jsx)("th",{className:D.tableCell,children:"\u7d50\u679c"})]})}),Object(q.jsx)("tbody",{children:a.map((function(e,t){return Object(q.jsxs)("tr",{children:[Object(q.jsx)("td",{className:D.tableCell,children:e.createdAt}),Object(q.jsx)("td",{className:D.tableCell,children:e.action}),Object(q.jsx)("td",{className:D.tableCell,children:e.success?"Y":"N"}),Object(q.jsx)("td",{className:D.tableCell,children:e.params}),Object(q.jsx)("td",{className:D.tableCell,children:Object(q.jsx)("pre",{className:g,children:I(e.result)})})]},t)}))})]})})]})})),U={actions:b("flex","justify-end"),action:b(v.buttonStyle,"w-28"),table:v.table,tableCell:v.tableCell,balancesCell:b("overflow-auto")},Y=Object(R.b)((function(){Object(n.useEffect)((function(){F.loadAccounts()}),[]);var e=Object(n.useCallback)((function(e){var t;return e.error?Object(q.jsx)(q.Fragment,{children:e.error}):e.balances?Object(q.jsxs)("div",{className:U.balancesCell,children:["\u53ef\u7528\u8cc7\u7522(USDT):",e.balances.availableBalance," ",Object(q.jsx)("br",{}),"\u6301\u5009:",((null===(t=e.balances)||void 0===t?void 0:t.positions)||[]).map((function(e){return"".concat(e.symbol,": ").concat(e.positionAmt)})).join(" ; ")||"\u7121\u5009\u4f4d\u7d00\u9304"]}):Object(q.jsx)(q.Fragment,{children:"\u7121\u8cc7\u7522"})}),[]);return Object(q.jsxs)("div",{className:v.pageEdge,children:[Object(q.jsx)("div",{className:U.actions,children:Object(q.jsx)(N.b,{className:U.action,to:"/Account/".concat(B),children:"\u65b0\u589e\u5e33\u865f"})}),"\u5e33\u6236\u5217\u8868:",Object(q.jsxs)("table",{className:U.table,children:[Object(q.jsx)("thead",{children:Object(q.jsxs)("tr",{children:[Object(q.jsx)("th",{className:U.tableCell}),Object(q.jsx)("th",{className:U.tableCell,children:"\u540d\u7a31"}),Object(q.jsx)("th",{className:U.tableCell,children:"\u8cc7\u7522 (free/locked)"}),Object(q.jsx)("th",{className:U.tableCell,children:"\u55ae\u7b46\u6295\u8cc7\u984d"}),Object(q.jsx)("th",{className:U.tableCell,children:"\u505c\u7528"}),Object(q.jsx)("th",{className:U.tableCell})]})}),Object(q.jsx)("tbody",{children:F.accounts.map((function(t,c){return Object(q.jsxs)("tr",{children:[Object(q.jsx)("td",{className:U.tableCell,children:Object(q.jsx)(N.b,{className:v.buttonStyle,to:"/Account/".concat(t.id),children:"\u7de8\u8f2f"})}),Object(q.jsx)("td",{className:U.tableCell,children:t.name}),Object(q.jsx)("td",{className:U.tableCell,children:e(t)}),Object(q.jsx)("td",{className:U.tableCell,children:t.quota}),Object(q.jsx)("td",{className:U.tableCell,children:t.disabled?"Y":""}),Object(q.jsx)("td",{className:U.tableCell,children:Object(q.jsx)(N.b,{className:v.buttonStyle,to:"/AccountRecord/".concat(t.name),children:"\u64cd\u4f5c\u8a18\u9304"})})]},c)}))})]})]})})),_=c(15),G=c.n(_);!function(e){e[e.Authenticated=0]="Authenticated",e[e.Authorized=1]="Authorized"}(a||(a={}));var V=new function e(){var t=this;Object(E.a)(this,e),this.authStatus=void 0,this.logout=function(){G.a.remove("auth-token"),t.authStatus=void 0},Object(T.l)(this);var c=G.a.get("auth-token");this.authStatus=c?a.Authorized:void 0},W={root:b("m-16","p-16")},H=Object(R.b)((function(){var e=Object(n.useState)(""),t=Object(S.a)(e,2),c=t[0],s=t[1];return Object(n.useEffect)((function(){fetch("/auth/url").then((function(e){return e.text()})).then((function(e){s(e)}))}),[]),V.authStatus===a.Authenticated?Object(q.jsx)(y.a,{push:!0,to:se(ne.Register)}):Object(q.jsx)("div",{className:W.root,children:Object(q.jsx)("a",{className:v.buttonStyle,href:c,children:"\u767b\u5165"})})})),Q={root:b("m-16","p-16")},X=Object(R.b)((function(){var e=Object(n.useMemo)((function(){return G.a.get("auth-token")}),[]),t=Object(n.useState)(!1),c=Object(S.a)(t,2),a=c[0],s=c[1];return e?a?Object(q.jsx)(y.a,{push:!0,to:se(ne.Accounts)}):Object(q.jsx)("div",{className:Q.root,children:Object(q.jsx)("button",{className:v.buttonStyle,onClick:function(){z.a.post("/auth/register").then((function(){s(!0)}))},children:"\u8a3b\u518a"})}):Object(q.jsx)(y.a,{push:!0,to:se(ne.Login)})})),Z={block:b("mb-6"),token:b(g)},$="/signal/trading",ee={action:"FOrder",symbol:"{{ticker}}",side:"{{strategy.order.action}}",quantity:"\u6578\u91cf(USDT)",token:"\u4f60\u7684Token"},te=function(){var e=Object(n.useMemo)((function(){return I(ee)}),[]),t=Object(n.useState)(""),c=Object(S.a)(t,2),a=c[0],s=c[1],r=Object(n.useState)([]),l=Object(S.a)(r,2),o=l[0],i=l[1],j=Object(n.useState)(!1),u=Object(S.a)(j,2),h=u[0],v=u[1],N=Object(n.useState)([]),y=Object(S.a)(N,2),C=y[0],k=y[1],w=Object(n.useState)(""),A=Object(S.a)(w,2),E=A[0],L=A[1];Object(n.useEffect)((function(){z.a.get("/signal/getToken").then((function(e){return s(e.data)})),z.a.get("/signal/getAllSymbol").then((function(e){return k(e.data.sort())})),z.a.get("/signal/actions").then((function(e){return i(e.data)}))}),[]);return Object(q.jsxs)("div",{className:d,children:[Object(q.jsx)("label",{children:"\u8a0a\u865f\u8aaa\u660e:"}),Object(q.jsx)("div",{className:Z.block,children:Object(q.jsxs)("pre",{className:g,children:["api url: ",window.location.host+$,Object(q.jsx)("br",{}),"payload:",e,Object(q.jsx)("br",{}),Object(q.jsx)("br",{}),"symbol\u548cside\u4f7f\u7528TradingView\u63d0\u4f9b\u7684\u8b8a\u6578",Object(q.jsx)("br",{}),"quantity\u8207token\u8acb\u81ea\u884c\u66f4\u6539"]})}),Object(q.jsx)("label",{children:"\u8a0a\u865f\u6e2c\u8a66:"}),Object(q.jsxs)("div",{className:b(Z.block,O,"p-3","flex"),children:[Object(q.jsxs)("select",{onChange:function(e){return L(e.target.value)},value:E,className:x,children:[Object(q.jsx)("option",{value:"",children:"\u8acb\u9078\u64c7\u4ea4\u6613\u5c0d"}),C.length>0&&C.map((function(e,t){return Object(q.jsx)("option",{value:e,children:e},t)}))]}),!h&&Object(q.jsx)("button",{className:m,onClick:function(){if(E){var e={action:"FOrderTest",symbol:E,side:"BUY",quantity:"1000",token:a};z.a.post($,e).then((function(e){return v(!0)}))}},children:"\u9001\u51fa"}),h&&Object(q.jsx)("div",{children:"\u6e2c\u8a66\u5df2\u9001\u51fa,\u8acb\u81f3[\u8a0a\u865f\u7d00\u9304]\u8207[\u5e33\u6236\u64cd\u4f5c\u8a18\u9304]\u67e5\u8a62\u7d50\u679c"})]}),Object(q.jsxs)("div",{className:Z.block,children:["\u6700\u65b0\u7684token:",Object(q.jsx)("div",{className:Z.token,children:Object(q.jsx)("div",{children:a})})]}),Object(q.jsxs)("div",{className:Z.block,children:["action\u5c0d\u7167\u8868:",Object(q.jsxs)("table",{className:p,children:[Object(q.jsx)("thead",{children:Object(q.jsxs)("tr",{children:[Object(q.jsx)("th",{className:f,children:"\u540d\u7a31"}),Object(q.jsx)("th",{className:f,children:"\u529f\u80fd\u63cf\u8ff0"})]})}),Object(q.jsx)("tbody",{children:o.map((function(e,t){return Object(q.jsxs)("tr",{children:[Object(q.jsx)("td",{className:f,children:e.action}),Object(q.jsx)("td",{className:f,children:e.description})]},t)}))})]})]}),Object(q.jsx)("h3",{children:"\u5176\u4ed6\u8cc7\u8a0a:"}),"TradingView\u7684",Object(q.jsx)("a",{href:"https://www.tradingview.com/support/solutions/43000531021-how-to-use-a-variable-value-in-alert/",rel:"noreferrer",children:"\u8b8a\u6578"}),"\u8aaa\u660e"]})},ce={tableContainer:b("overflow-auto"),table:v.table,tableCell:b(v.tableCell,"break-all")},ae=function(){var e=Object(n.useState)([]),t=Object(S.a)(e,2),c=t[0],a=t[1],s=Object(n.useState)([]),r=Object(S.a)(s,2),l=r[0],o=r[1],i=function(){var e=Object(A.a)(w.a.mark((function e(){var t,c;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.a.get("/signal/history").then((function(e){return e.data}));case 2:t=e.sent,a(t),c=new Set,t.forEach((function(e){Object.keys(e).forEach((function(e){e.startsWith("_")||"id"===e||c.add(e)}))})),o(Array.from(c));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){i().then()}),[]),Object(q.jsxs)("div",{className:v.pageEdge,children:["\u8a0a\u865f\u7d00\u9304:",Object(q.jsx)("div",{className:ce.tableContainer,children:Object(q.jsxs)("table",{className:ce.table,children:[Object(q.jsx)("thead",{children:Object(q.jsxs)("tr",{children:[0===l.length&&Object(q.jsx)("th",{className:ce.tableCell,children:"\u7121\u4efb\u4f55\u7d00\u9304"}),l.length>0&&l.map((function(e,t){return Object(q.jsx)("th",{className:ce.tableCell,children:e},t)}))]})}),Object(q.jsx)("tbody",{children:c.map((function(e,t){return Object(q.jsx)("tr",{children:l.map((function(t,c){return Object(q.jsx)("td",{className:ce.tableCell,children:e[t]},c)}))},t)}))})]})})]})},ne={Login:{path:"/",exact:!0,component:H},Register:{path:"/Register",component:X,protectionLevel:a.Authenticated},Accounts:{path:"/Accounts",lable:"\u5e63\u5b89\u5e33\u6236",component:Y,protectionLevel:a.Authorized},Account:{path:"/Account/:id",lable:"\u7de8\u8f2f\u5e63\u5b89\u5e33\u6236",component:P,protectionLevel:a.Authorized},AccountRecord:{path:"/AccountRecord/:name",lable:"\u5e33\u6236\u64cd\u4f5c\u7d00\u9304",component:J,protectionLevel:a.Authorized},Signals:{path:"/Signals",lable:"\u8a0a\u865f\u7d00\u9304",component:ae,protectionLevel:a.Authorized},SignalManual:{path:"/SignalManual",lable:"\u8a0a\u865f\u8a2d\u5b9a\u8aaa\u660e",component:te,protectionLevel:a.Authorized}},se=function(e){return e.path?Object(y.f)(e.path):""},re=[ne.Accounts,ne.Signals,ne.SignalManual],le={root:b("bg-white","dark:bg-gray-800","py-3","px-6","flex","justify-between"),menus:b("flex","justify-between"),site:b("font-bold"),menu:b("pl-6","text-gray-200")},oe=Object(R.b)((function(){return Object(q.jsxs)("div",{className:le.root,children:[Object(q.jsxs)("div",{className:le.menus,children:[Object(q.jsx)("div",{className:le.site,children:"TradingBotttt v.0"}),V.authStatus===a.Authorized&&re.map((function(e,t){return Object(q.jsx)(N.b,{to:se(e),className:le.menu,children:e.lable},t)}))]}),V.authStatus===a.Authorized&&Object(q.jsx)("a",{onClick:function(){V.logout(),window.location.reload()},href:"/",children:"logout"})]})})),ie=Object.values(ne),be=Object(R.b)((function(){return Object(q.jsx)(y.d,{children:ie.map((function(e,t){return e.protectionLevel&&e.protectionLevel!==V.authStatus?Object(q.jsx)(y.a,{to:se(ne.Login)},t):Object(q.jsx)(y.b,Object(o.a)({},e),t)}))})})),je={authStore:V,accountStore:F},ue=je;window.stores=je,z.a.interceptors.request.use((function(e){var t=G.a.get("auth-token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e}),(function(e){return Promise.reject(e)})),z.a.interceptors.response.use((function(e){return e}),(function(e){if(e.response)switch(e.response.status){case 401:window.location.href="/"}return Promise.reject(e)}));var de=i(v.background,v.textColor,"min-h-screen"),he=function(){return Object(n.useEffect)((function(){document.documentElement.classList.add("dark")}),[]),Object(q.jsx)("div",{className:de,children:Object(q.jsx)(R.a,Object(o.a)(Object(o.a)({},ue),{},{children:Object(q.jsxs)(N.a,{children:[Object(q.jsx)(oe,{}),Object(q.jsx)(be,{})]})}))})},Oe=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,70)).then((function(t){var c=t.getCLS,a=t.getFID,n=t.getFCP,s=t.getLCP,r=t.getTTFB;c(e),a(e),n(e),s(e),r(e)}))};c(68);l.a.render(Object(q.jsx)(s.a.StrictMode,{children:Object(q.jsx)(he,{})}),document.getElementById("root")),Oe()}},[[69,1,2]]]);
//# sourceMappingURL=main.ed5e9cb2.chunk.js.map