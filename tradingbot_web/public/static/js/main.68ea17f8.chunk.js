(this.webpackJsonptradingbot_fe=this.webpackJsonptradingbot_fe||[]).push([[0],{67:function(e,t,c){},68:function(e,t,c){"use strict";c.r(t);var n,a=c(0),s=c.n(a),r=c(18),o=c.n(r),l=c(17),u=c(34).a,i=u,b={background:i("bg-white","dark:bg-gray-700"),textColor:i("text-black","dark:text-white"),pageEdge:i("py-3","px-6"),buttonStyle:i("block","w-full","text-center","py-2","px-4","mb-2","rounded","bg-transparent","hover:bg-blue-500","font-semibold","text-blue-500","hover:text-white","border","border-blue-500","hover:border-transparent")},j=c(8),d=c(3),h=c(14),x=c(15),O=c.n(x),f=c(19),p=c(20),m=c(11),g=c.n(m),v=c(2),N=new function e(){var t=this;Object(p.a)(this,e),this.accounts=[],this.loadAccounts=Object(f.a)(O.a.mark((function e(){var c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.get("/accounts/all").then((function(e){return e.data}));case 2:(c=e.sent).forEach((function(e){e.balances=e.balances.map((function(e){return e.free=Number(e.free),e.locked=Number(e.locked),e.sum=e.free+e.locked,e})).sort((function(e,t){return e.sum-t.sum}))})),t.accounts=c;case 5:case"end":return e.stop()}}),e)}))),Object(v.l)(this)},y=c(1),S={root:i(b.pageEdge,"grid","grid-cols-2","gap-2"),input:i(b.background),button:i(b.buttonStyle,"col-span-2")},k=function(){var e=Object(d.h)().id,t=Object(a.useState)({}),c=Object(h.a)(t,2),n=c[0],s=c[1];return Object(a.useEffect)((function(){var t=N.accounts.find((function(t){return t.id===e}))||{};s(t)}),[]),Object(y.jsxs)("div",{className:S.root,children:[Object(y.jsx)("label",{children:"\u540d\u7a31"}),Object(y.jsx)("input",{type:"text",value:n.name}),"New"===e&&Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("label",{children:"API key"}),Object(y.jsx)("input",{className:S.input,type:"text",value:n.apiKey}),Object(y.jsx)("label",{children:"Secret key"}),Object(y.jsx)("input",{className:S.input,type:"text",value:n.secretKey})]}),Object(y.jsx)("label",{children:"\u55ae\u7b46\u6295\u8cc7\u984d"}),Object(y.jsx)("input",{className:S.input,type:"number",value:n.quota}),Object(y.jsx)("label",{children:"\u505c\u7528"}),Object(y.jsx)("input",{className:S.input,type:"checkbox",checked:n.disable}),Object(y.jsx)("button",{className:S.button,children:"\u5132\u5b58"})]})},A=c(9),w={root:i(b.pageEdge),actions:i("flex","justify-end"),action:i(b.buttonStyle,"w-28"),table:i("table-auto","rounded","border-collapse","border","border-gray-800","min-w-full"),tableCell:i("py-3","px-2","border","border-gray-600","h-10","text-center"),balancesCell:i("h-full","overflow-auto","text-left")},C=Object(A.b)((function(){return Object(a.useEffect)((function(){Object(f.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.loadAccounts();case 2:case"end":return e.stop()}}),e)})))()}),[]),Object(y.jsxs)("div",{className:w.root,children:[Object(y.jsx)("div",{className:w.actions,children:Object(y.jsx)(j.b,{className:w.action,to:"/Account/".concat("New"),children:"\u65b0\u589e\u5e33\u865f"})}),"\u5e33\u6236\u5217\u8868:",Object(y.jsxs)("table",{className:w.table,children:[Object(y.jsx)("thead",{children:Object(y.jsxs)("tr",{children:[Object(y.jsx)("th",{className:w.tableCell,children:"\u540d\u7a31"}),Object(y.jsx)("th",{className:w.tableCell,children:"\u9918\u984d (free/locked)"}),Object(y.jsx)("th",{className:w.tableCell,children:"\u55ae\u7b46\u6295\u8cc7\u984d"}),Object(y.jsx)("th",{className:w.tableCell,children:"\u505c\u7528"}),Object(y.jsx)("th",{className:w.tableCell})]})}),Object(y.jsx)("tbody",{children:N.accounts.map((function(e,t){return Object(y.jsxs)("tr",{children:[Object(y.jsx)("td",{className:w.tableCell,children:e.name}),Object(y.jsx)("td",{className:w.tableCell,children:Object(y.jsx)("pre",{className:w.balancesCell,children:e.balances.map((function(e){return"".concat(e.asset,": ").concat(e.free," / ").concat(e.locked)})).join("\n")})}),Object(y.jsx)("td",{className:w.tableCell,children:e.quota}),Object(y.jsx)("td",{className:w.tableCell,children:e.disable?"V":""}),Object(y.jsx)("td",{className:w.tableCell,children:Object(y.jsx)(j.b,{className:b.buttonStyle,to:"/Account/".concat(e.id),children:"\u7de8\u8f2f"})})]},t)}))})]})]})})),L=c(13),E=c.n(L);!function(e){e[e.Authenticated=0]="Authenticated",e[e.Authorized=1]="Authorized"}(n||(n={}));var z=new function e(){var t=this;Object(p.a)(this,e),this.authStatus=void 0,this.setAuthStatus=function(e){t.authStatus=e},Object(v.l)(this);var c=E.a.get("auth-token");this.setAuthStatus(c?n.Authorized:void 0)},F={root:i("m-16","p-16","border","rounded","bg-gray-700","text-gray-900")},P=Object(A.b)((function(){var e=Object(a.useState)(""),t=Object(h.a)(e,2),c=t[0],s=t[1];return Object(a.useEffect)((function(){fetch("/auth/url").then((function(e){return e.text()})).then((function(e){s(e)}))}),[]),z.authStatus===n.Authenticated?Object(y.jsx)(d.a,{push:!0,to:R(I.Register)}):Object(y.jsx)("div",{className:F.root,children:Object(y.jsx)("a",{className:b.buttonStyle,href:c,children:"\u767b\u5165"})})})),B={root:i("m-16","p-16","border","rounded","bg-gray-700","text-gray-900")},q=function(){return Object(y.jsx)(y.Fragment,{children:"SignalsSignalsSignals"})},I={Login:{path:"/",exact:!0,component:P},Register:{path:"/Register",component:Object(A.b)((function(){var e=Object(a.useMemo)((function(){return E.a.get("auth-token")}),[]),t=Object(a.useState)(!1),c=Object(h.a)(t,2),n=c[0],s=c[1];return e?n?Object(y.jsx)(d.a,{push:!0,to:R(I.Accounts)}):Object(y.jsx)("div",{className:B.root,children:Object(y.jsx)("button",{className:b.buttonStyle,onClick:function(){g.a.post("/auth/register").then((function(){s(!0)}))},children:"\u8a3b\u518a"})}):Object(y.jsx)(d.a,{push:!0,to:R(I.Login)})})),protectionLevel:n.Authenticated},Accounts:{path:"/Accounts",lable:"\u5e63\u5b89\u5e33\u6236",component:C,protectionLevel:n.Authorized},Account:{path:"/Account/:id",lable:"\u7de8\u8f2f\u5e63\u5b89\u5e33\u6236",component:k,protectionLevel:n.Authorized},Signals:{path:"/Signals",lable:"\u8a0a\u865f\u7d00\u9304",component:q,protectionLevel:n.Authorized}},R=function(e){return e.path?Object(d.f)(e.path):""},T=[I.Accounts,I.Signals],J={root:i("bg-white","dark:bg-gray-800","py-3","px-6","flex","justify-between"),menus:i("flex","justify-between"),site:i("font-bold"),menu:i("pl-6")},K=Object(A.b)((function(){return Object(y.jsxs)("div",{className:J.root,children:[Object(y.jsxs)("div",{className:J.menus,children:[Object(y.jsx)("div",{className:J.site,children:"TradingBotttt v.0"}),z.authStatus===n.Authorized&&T.map((function(e,t){return Object(y.jsx)(j.b,{to:R(e),className:J.menu,children:e.lable},t)}))]}),z.authStatus===n.Authorized&&Object(y.jsx)("button",{onClick:function(){z.setAuthStatus(void 0)},children:"logout"})]})})),M=Object.values(I),_=Object(A.b)((function(){return Object(y.jsx)(d.d,{children:M.map((function(e,t){return e.protectionLevel&&e.protectionLevel!==z.authStatus?Object(y.jsx)(d.a,{to:R(I.Login)},t):Object(y.jsx)(d.b,Object(l.a)({},e),t)}))})})),D={authStore:z,accountStore:N},V=D;window.stores=D,g.a.interceptors.request.use((function(e){var t=E.a.get("auth-token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e}),(function(e){return Promise.reject(e)})),g.a.interceptors.response.use((function(e){return e}),(function(e){if(e.response)switch(e.response.status){case 401:window.location.href="/#/Login"}return Promise.reject(e)}));var G=u(b.background,b.textColor,"min-h-screen"),H=function(){return Object(a.useEffect)((function(){document.documentElement.classList.add("dark")}),[]),Object(y.jsx)("div",{className:G,children:Object(y.jsx)(A.a,Object(l.a)(Object(l.a)({},V),{},{children:Object(y.jsxs)(j.a,{children:[Object(y.jsx)(K,{}),Object(y.jsx)(_,{})]})}))})},Q=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,69)).then((function(t){var c=t.getCLS,n=t.getFID,a=t.getFCP,s=t.getLCP,r=t.getTTFB;c(e),n(e),a(e),s(e),r(e)}))};c(67);o.a.render(Object(y.jsx)(s.a.StrictMode,{children:Object(y.jsx)(H,{})}),document.getElementById("root")),Q()}},[[68,1,2]]]);
//# sourceMappingURL=main.68ea17f8.chunk.js.map