(this.webpackJsonptradingbot_fe=this.webpackJsonptradingbot_fe||[]).push([[0],{68:function(e,t,n){},69:function(e,t,n){"use strict";n.r(t);var c,a=n(0),r=n.n(a),s=n(19),o=n.n(s),l=n(12),i=n(35).a,u=i,b=u("bg-gray-100","dark:bg-gray-700"),j=u("text-gray-900","dark:text-gray-100"),d=u("py-3","px-6"),h=u("rounded","border"),O={background:b,textColor:j,pageEdge:d,border:h,borderGray:u(h,"border-gray-100","dark:border-gray-600"),buttonStyle:u("block","w-full","text-center","py-2","px-4","hover:bg-blue-500","font-semibold","text-blue-500","hover:text-white",h,"border-blue-500","hover:border-transparent"),table:u("table-auto","rounded","border-collapse","border","border-gray-800","w-full"),tableCell:u("py-3","px-2","border","border-gray-600","h-10","text-center")},p=n(10),f=n(3),x=n(20),m=n(6),g=n(14),v=n.n(g),y=n(18),N=n(21),k=n(5),S=n.n(k),C=n(2),w=new function e(){var t=this;Object(N.a)(this,e),this.accounts=[],this.loadAccounts=Object(y.a)(v.a.mark((function e(){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.a.get("/accounts/all").then((function(e){return e.data}));case 2:(n=e.sent).forEach((function(e){e.balances=(e.balances||[]).map((function(e){return e.free=Number(e.free),e.locked=Number(e.locked),e.sum=e.free+e.locked,e})).sort((function(e,t){return e.sum-t.sum}))})),t.accounts=n;case 5:case"end":return e.stop()}}),e)}))),this.save=function(){var e=Object(y.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.a.post("/accounts/save",t).then((function(e){return e.data}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Object(C.l)(this)},A=n(1),E="New",L={root:u(O.pageEdge,"grid","grid-cols-2","gap-2"),input:u(O.background,O.borderGray,"px-3"),checkbox:u("translate-y-1.5","transform-gpu"),error:u("col-span-2","pt-2","text-red-500","text-xs"),button:u(O.buttonStyle,"col-span-2")},T={id:"",name:"",apiKey:"",apiSecret:"",quota:0,disabled:!1},z=function(){var e=Object(f.h)().id,t=Object(a.useState)(Object(l.a)({},T)),n=Object(m.a)(t,2),c=n[0],r=n[1],s=Object(a.useState)(!1),o=Object(m.a)(s,2),i=o[0],u=o[1],b=Object(a.useState)(""),j=Object(m.a)(b,2),d=j[0],h=j[1];Object(a.useEffect)((function(){var t=e===E?T:w.accounts.find((function(t){return t.id===e}));t?r(Object(l.a)({},t)):u(!0)}),[e]);var O=function(e){var t=e.currentTarget,n="checkbox"===t.type?t.checked:t.value,a=t.name;r(Object(l.a)(Object(l.a)({},c),{},Object(x.a)({},a,n)))};return i?Object(A.jsx)(f.a,{push:!0,to:X(W.Accounts)}):Object(A.jsxs)("div",{className:L.root,children:[Object(A.jsx)("label",{children:"\u540d\u7a31"}),Object(A.jsx)("input",{className:L.input,name:"name",type:"text",value:c.name,onChange:O}),e===E&&Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)("label",{children:"API key"}),Object(A.jsx)("input",{className:L.input,name:"apiKey",type:"text",value:c.apiKey,onChange:O}),Object(A.jsx)("label",{children:"API Secret"}),Object(A.jsx)("input",{className:L.input,name:"apiSecret",type:"text",value:c.apiSecret,onChange:O})]}),Object(A.jsx)("label",{children:"\u55ae\u7b46\u6295\u8cc7\u984d"}),Object(A.jsx)("input",{className:L.input,name:"quota",type:"number",value:c.quota,onChange:O}),Object(A.jsx)("label",{children:"\u505c\u7528"}),Object(A.jsx)("input",{className:L.checkbox,name:"disabled",type:"checkbox",checked:c.disabled,onChange:O}),Object(A.jsx)("pre",{className:L.error,children:d||c.error}),Object(A.jsx)("button",{className:L.button,onClick:function(){var t=[];c.name||t.push("\u8acb\u8f38\u5165 \u540d\u7a31"),e===E&&(c.apiKey||t.push("\u8acb\u8f38\u5165 api Key"),c.apiSecret||t.push("\u8acb\u8f38\u5165 api Secret"),r(Object(l.a)(Object(l.a)({},c),{},{error:t.join("\n")}))),t.length>0||w.save(c).then((function(){u(!0)})).catch((function(){h("\u5132\u5b58\u5931\u6557, \u8acb\u6aa2\u67e5\u60a8\u7684 api Key \u6216 api Secret")}))},children:"\u5132\u5b58"})]})},F=n(11),K={actions:u("flex","justify-end"),action:u(O.buttonStyle,"w-28"),table:O.table,tableCell:O.tableCell,balancesCell:u("h-full","overflow-auto","text-left")},q=Object(F.b)((function(){Object(a.useEffect)((function(){w.loadAccounts()}),[]);var e=Object(a.useCallback)((function(e){return e.error?Object(A.jsx)(A.Fragment,{children:e.error}):e.balances&&0!==e.balances.length?Object(A.jsx)("pre",{className:K.balancesCell,children:(e.balances||[]).map((function(e){return"".concat(e.asset,": ").concat(e.free," / ").concat(e.locked)})).join("\n")}):Object(A.jsx)(A.Fragment,{children:"\u7121\u8cc7\u7522"})}),[]);return Object(A.jsxs)("div",{className:O.pageEdge,children:[Object(A.jsx)("div",{className:K.actions,children:Object(A.jsx)(p.b,{className:K.action,to:"/Account/".concat(E),children:"\u65b0\u589e\u5e33\u865f"})}),"\u5e33\u6236\u5217\u8868:",Object(A.jsxs)("table",{className:K.table,children:[Object(A.jsx)("thead",{children:Object(A.jsxs)("tr",{children:[Object(A.jsx)("th",{className:K.tableCell,children:"\u540d\u7a31"}),Object(A.jsx)("th",{className:K.tableCell,children:"\u8cc7\u7522 (free/locked)"}),Object(A.jsx)("th",{className:K.tableCell,children:"\u55ae\u7b46\u6295\u8cc7\u984d"}),Object(A.jsx)("th",{className:K.tableCell,children:"\u505c\u7528"}),Object(A.jsx)("th",{className:K.tableCell})]})}),Object(A.jsx)("tbody",{children:w.accounts.map((function(t,n){return Object(A.jsxs)("tr",{children:[Object(A.jsx)("td",{className:K.tableCell,children:t.name}),Object(A.jsx)("td",{className:K.tableCell,children:e(t)}),Object(A.jsx)("td",{className:K.tableCell,children:t.quota}),Object(A.jsx)("td",{className:K.tableCell,children:t.disabled?"Y":""}),Object(A.jsx)("td",{className:K.tableCell,children:Object(A.jsx)(p.b,{className:O.buttonStyle,to:"/Account/".concat(t.id),children:"\u7de8\u8f2f"})})]},n)}))})]})]})})),B={isDev:"localhost:4200"===window.location.host},M=n(16),P=n.n(M);!function(e){e[e.Authenticated=0]="Authenticated",e[e.Authorized=1]="Authorized"}(c||(c={}));var D=new function e(){var t=this;Object(N.a)(this,e),this.authStatus=void 0,this.setAuthStatus=function(e){t.authStatus=e},Object(C.l)(this);var n=P.a.get("auth-token");this.setAuthStatus(n?c.Authorized:void 0)},I={root:u("m-16","p-16")},R=Object(F.b)((function(){var e=Object(a.useState)(""),t=Object(m.a)(e,2),n=t[0],r=t[1];return Object(a.useEffect)((function(){B.isDev?r("/"):fetch("/auth/url").then((function(e){return e.text()})).then((function(e){r(e)}))}),[]),D.authStatus===c.Authenticated?Object(A.jsx)(f.a,{push:!0,to:X(W.Register)}):Object(A.jsx)("div",{className:I.root,children:Object(A.jsx)("a",{className:O.buttonStyle,href:n,children:"\u767b\u5165"})})})),J={root:u("m-16","p-16")},Y=Object(F.b)((function(){var e=Object(a.useMemo)((function(){return P.a.get("auth-token")}),[]),t=Object(a.useState)(!1),n=Object(m.a)(t,2),c=n[0],r=n[1];return e?c?Object(A.jsx)(f.a,{push:!0,to:X(W.Accounts)}):Object(A.jsx)("div",{className:J.root,children:Object(A.jsx)("button",{className:O.buttonStyle,onClick:function(){B.isDev?r(!0):S.a.post("/auth/register").then((function(){r(!0)}))},children:"\u8a3b\u518a"})}):Object(A.jsx)(f.a,{push:!0,to:X(W.Login)})})),_=u("w-full","break-all","rounded","bg-gray-600","p-2","mb-3"),G={block:u("mb-3")},V={token:"[Your Token]",action:"/api/v3/order",symbol:"LTCBTC",side:"BUY",type:"MARKET",quantity:"100"},U=function(){var e,t=Object(a.useState)(""),n=Object(m.a)(t,2),c=n[0],r=n[1];return Object(a.useEffect)((function(){S.a.get("/signal/getToken").then((function(e){r(e.data),S.a.post("/signal/trading",{action:"order",token:e.data}).then((function(e){console.log(e)}))}))}),[]),Object(A.jsxs)("div",{className:O.pageEdge,children:[Object(A.jsxs)("div",{className:G.block,children:["token:",Object(A.jsx)("div",{className:_,children:c})]}),Object(A.jsx)("label",{children:"\u8a0a\u865f\u8a2d\u5b9a\u8aaa\u660e:"}),Object(A.jsxs)("div",{className:G.block,children:[Object(A.jsx)("a",{href:"https://binance-docs.github.io/apidocs/spot/cn/#c15d2e6b39",target:"_blank",children:"\u73fe\u8ca8\u55ae:"}),Object(A.jsx)("br",{}),Object(A.jsx)("pre",{className:_,children:(e=V,JSON.stringify(e,null,"\t"))})]}),Object(A.jsx)("h3",{children:"\u5176\u4ed6\u8cc7\u8a0a:"}),"\u82e5\u60a8\u7684\u8a0a\u865f\u4f86\u81eaTradingView, \u53ef\u4f7f\u7528TradingView\u63d0\u4f9b\u7684",Object(A.jsx)("a",{href:"https://www.tradingview.com/support/solutions/43000531021-how-to-use-a-variable-value-in-alert/",children:"\u8b8a\u6578"}),"\u8a2d\u5b9a\u8a0a\u865f"]})},H={table:O.table,tableCell:u(O.tableCell,"break-all")},Q=function(){var e=Object(a.useState)([]),t=Object(m.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)([]),s=Object(m.a)(r,2),o=s[0],l=s[1],i=Object(a.useState)(""),u=Object(m.a)(i,2),b=u[0],j=u[1],d=function(){var e=Object(y.a)(v.a.mark((function e(){var t,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.a.get("/signal/history").then((function(e){return e.data}));case 2:t=e.sent,c(t),n=new Set,t.forEach((function(e){Object.keys(e).forEach((function(e){return n.add}))})),l(Array.from(n));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){d(),S.a.get("/signal/getToken").then((function(e){return j(e.data)}))}),[]),Object(A.jsxs)("div",{className:O.pageEdge,children:["token:",Object(A.jsx)("div",{className:_,children:b}),"\u8a0a\u865f\u7d00\u9304:",Object(A.jsxs)("table",{className:H.table,children:[Object(A.jsx)("thead",{children:Object(A.jsxs)("tr",{children:[0===o.length&&Object(A.jsx)("th",{className:H.tableCell,children:"\u7121\u4efb\u4f55\u7d00\u9304"}),o.length>0&&o.map((function(e,t){return Object(A.jsx)("th",{className:H.tableCell,children:e},t)}))]})}),Object(A.jsx)("tbody",{children:n.map((function(e,t){return Object(A.jsx)("tr",{children:o.map((function(t,n){return Object(A.jsx)("td",{className:H.tableCell,children:e[t]},n)}))},t)}))})]})]})},W={Login:{path:"/",exact:!0,component:R},Register:{path:"/Register",component:Y,protectionLevel:c.Authenticated},Accounts:{path:"/Accounts",lable:"\u5e63\u5b89\u5e33\u6236",component:q,protectionLevel:c.Authorized},Account:{path:"/Account/:id",lable:"\u7de8\u8f2f\u5e63\u5b89\u5e33\u6236",component:z,protectionLevel:c.Authorized},Signals:{path:"/Signals",lable:"\u8a0a\u865f\u7d00\u9304",component:Q,protectionLevel:c.Authorized},SignalManual:{path:"/SignalManual",lable:"\u8a0a\u865f\u8a2d\u5b9a\u8aaa\u660e",component:U,protectionLevel:c.Authorized}},X=function(e){return e.path?Object(f.f)(e.path):""},Z=[W.Accounts,W.Signals,W.SignalManual],$={root:u("bg-white","dark:bg-gray-800","py-3","px-6","flex","justify-between"),menus:u("flex","justify-between"),site:u("font-bold"),menu:u("pl-6")},ee=Object(F.b)((function(){return Object(A.jsxs)("div",{className:$.root,children:[Object(A.jsxs)("div",{className:$.menus,children:[Object(A.jsx)("div",{className:$.site,children:"TradingBotttt v.0"}),D.authStatus===c.Authorized&&Z.map((function(e,t){return Object(A.jsx)(p.b,{to:X(e),className:$.menu,children:e.lable},t)}))]}),D.authStatus===c.Authorized&&Object(A.jsx)("button",{onClick:function(){D.setAuthStatus(void 0)},children:"logout"})]})})),te=Object.values(W),ne=Object(F.b)((function(){return Object(A.jsx)(f.d,{children:te.map((function(e,t){return e.protectionLevel&&e.protectionLevel!==D.authStatus?Object(A.jsx)(f.a,{to:X(W.Login)},t):Object(A.jsx)(f.b,Object(l.a)({},e),t)}))})})),ce={authStore:D,accountStore:w},ae=ce;window.stores=ce,S.a.interceptors.request.use((function(e){var t=P.a.get("auth-token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e}),(function(e){return Promise.reject(e)})),S.a.interceptors.response.use((function(e){return e}),(function(e){if(e.response)switch(e.response.status){case 401:window.location.href="/"}return Promise.reject(e)}));var re=i(O.background,O.textColor,"min-h-screen"),se=function(){return Object(a.useEffect)((function(){document.documentElement.classList.add("dark")}),[]),Object(A.jsx)("div",{className:re,children:Object(A.jsx)(F.a,Object(l.a)(Object(l.a)({},ae),{},{children:Object(A.jsxs)(p.a,{children:[Object(A.jsx)(ee,{}),Object(A.jsx)(ne,{})]})}))})},oe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,70)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),c(e),a(e),r(e),s(e)}))};n(68);o.a.render(Object(A.jsx)(r.a.StrictMode,{children:Object(A.jsx)(se,{})}),document.getElementById("root")),oe()}},[[69,1,2]]]);
//# sourceMappingURL=main.18d55078.chunk.js.map